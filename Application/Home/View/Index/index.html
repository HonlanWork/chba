<style>
#main {
    padding-top: 70px;
    padding-bottom: 10px;
}
#main .item {
    margin: 15px;
    padding: 15px;
    position: relative;
    border-radius: 5px;
    background-color: #fff;
    box-shadow: 2px 2px 2px rgba(20, 20, 20, 0.4);
}

#main .item:hover {
    cursor: pointer;
}

#main #items a {
    color: #555;
    text-decoration: none;
}

#main .item img {
    width: 100%;
    border-radius: 5px;
}

#main .item p {
    width: 55%;
    line-height: 1.5;
    display: inline-block;
    font-size: 13px;
    margin-bottom: 0;
    margin-left: 5%;
    vertical-align: top;
}
#status, #timeleft {
    margin-left: 12px;
}
#index .cell {
    z-index: 999;
    display: inline-block;
    width: 200px;
    padding: 8px;
    padding-left: 12px;
    color: rgb(90, 103, 121);
    background-color: #fff;
    font-size: 12px;
    z-index: 999;
    text-align: left;
    display: none;
    box-shadow: 1px 1px 2px rgba(40, 40, 40, 0.2);
}

#index {
    display: inline-block;
    margin-left: 13px;
    position: relative;
    z-index: 999;
}

#index .cell:first-child {
    border-top-left-radius: 4px;
    border-top-right-radius: 4px;
}

#index .cell:last-child {
    border-bottom-left-radius: 4px;
    border-bottom-right-radius: 4px;
}

#index .cell:hover {
    cursor: pointer;
    background-color: #50a3ba !important;
    color: #fff;
}

#index input {
    color: #333;
    border-bottom: 1px solid #333;
    outline: none;
    box-shadow: none;
    width: 200px;
    font-size: 12px;
}

#index input:hover {
    cursor: pointer;
}

#index.active input {
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
}
</style>
<div style="padding:40px 20px;text-align:center;padding-bottom:30px;">
    <img src="__PUBLIC__/img/chba.png" alt="" style="width:240px;">
    <h4 style="font-size:16px;margin-bottom:15px;color:#333;line-height:1.5;">{$auction.title}</h4>
    <h4 style="font-size:14px;margin-bottom:15px;color:#555;line-height:1.5;">{$auction.titleen}</h4>
    <p style="margin-bottom:5px;">开始时间-From<span style="margin-left:16px;">{$auction.begintime|date='Y-m-d H:i:s',###}</span></p>
    <p style="margin-bottom:5px;">结束时间-To<span style="margin-left:16px;">{$auction.endtime|date='Y-m-d H:i:s',###}</span></p>
    <p style="margin-bottom:5px;">拍卖状态-Status
        <if condition="$auction['begintime'] gt $now">
            <span id="status">未开始-Not Started</span>
            <elseif condition="$auction['endtime'] lt $now" />
            <span id="status">已结束-Ended</span>
            <else/>
            <span id="status">进行中-In Process</span>
            <p>距离结束-Time left<span id="deadline" style="display:none;">{$auction.endtime}</span><span id="timeleft"></span></p>
        </if>
    </p>
</div>
<div style="font-size:13px;text-align:center;margin-bottom:5px;">
    <span>类别-Categories</span>
    <!-- <select class="form-control" style="color:#333;display:inline-block;width:200px;font-size:13px;margin-left:10px;">
        <option value="全部 All" selected="selected">全部 All</option>
        <option value="机票、酒店、度假村等旅行产品 Travel-related Items">机票、酒店、度假村等旅行产品 Travel-related Items</option>
        <option value="体验服务类 Unique Experiences, Luxury / Fashion">体验服务类 Unique Experiences, Luxury / Fashion</option>
        <option value="零售类产品 Retail Goods Items">零售类产品 Retail Goods Items</option>
        <option value="收藏品 Collectables Items">收藏品 Collectables Items</option>
        <option value="工艺与艺术品类 Displayable Art-pieces">工艺与艺术品类 Displayable Art-pieces</option>
        <option value="非旅行类礼券 Service Vouchers">非旅行类礼券 Service Vouchers</option>
        <option value="儿童作品 Children's Art Works">儿童作品 Children's Art Works</option>
    </select> -->
    <div id="index">
        <input type="text" class="form-control" value="全部 All">
        <div style="position:absolute;top:0;left:0;width:200px;">
            <span class="fa fa-fw fa-caret-down" style="position:absolute;right:0;top:10px;"></span>
            <div class="cell" name="全部 All">全部 All</div>
            <div class="cell" name="机票、酒店、度假村等旅行产品 Travel-related Items" style="background-color:#ffdddd;">机票、酒店、度假村等旅行产品 Travel-related Items</div>
            <div class="cell" name="体验服务类 Unique Experiences, Luxury / Fashion" style="background-color:#fff0dd;">体验服务类 Unique Experiences, Luxury / Fashion</div>
            <div class="cell" name="零售类产品 Retail Goods Items" style="background-color:#faffdd;">零售类产品 Retail Goods Items</div>
            <div class="cell" name="收藏品 Collectables Items" style="background-color:#deffdd;">收藏品 Collectables Items</div>
            <div class="cell" name="工艺与艺术品类 Displayable Art-pieces" style="background-color:#ddffff;">工艺与艺术品类 Displayable Art-pieces</div>
            <div class="cell" name="非旅行类礼券 Service Vouchers" style="background-color:#e2ddff;">非旅行类礼券 Service Vouchers</div>
            <div class="cell" name="儿童作品 Children's Art Works" style="background-color:#faddff;">儿童作品 Children's Art Works</div>
        </div>
    </div>
</div>
<div style="text-align:center;margin-bottom:25px;">
    <span>搜索-Search</span>
    <input type="text" id="search" class="form-control" style="color:#333;display:inline-block;width:200px;font-size:13px;margin-left:30px;">
</div>
<div id="items">
    <foreach name="items" item="v">
        <a href="{:U('Index/detail',array('id'=>$v['id']))}" name="{$v.category}">
            <div class="item">
                <div style="display:inline-block;width: 35%;">
                    <img src="__PUBLIC__{$v.thumbnail}">
                    <if condition="$v['highest'] eq 0">
                        <p style="color:#f56e60;text-align:center;width:100%;margin-top:12px;">起拍价-Start</p>
                        <p style="color:#f56e60;text-align:center;width:100%;">{$v.start}</p>
                        <else/>
                        <p style="color:#f56e60;text-align:center;width:100%;margin-top:12px;">目前最高价-Current Price</p>
                        <p style="color:#f56e60;text-align:center;width:100%;">{$v.highest}</p>
                    </if>
                </div>
                <p><span class="number">{$v.number}</span> <span class="title">{$v.title}</span></p>
            </div>
        </a>
    </foreach>
</div>
<script>
$(document).ready(function() {
    $('#nav1').addClass('active');
    var category = "全部 All";
    var keyword = "";

    $('#index input').click(function(event) {
        $('#index').addClass('active');
        $('#index .cell').show();
    });
    $('#index .cell').click(function(event) {
        $('#index').removeClass('active');
        $('#index input').val($(this).text());
        $('#index .cell').hide();
        category = $(this).text();
        filter();
    });

    function filter(){
        $('#items>a').show();

        $('#items>a').each(function(index, el) {
            var flag = false;
            var $p = $(this);

            if (keyword != '') {
                $p.children('div').children('p').children('span.number').each(function(index, el) {
                    if ($(this).text().indexOf(keyword) >= 0) {
                        flag = true;
                    }
                });
                $p.children('div').children('p').children('span.title').each(function(index, el) {
                    if ($(this).text().indexOf(keyword) >= 0) {
                        flag = true;
                    }
                });
            }
            else {
                flag = true;
            }

            if (category != '全部 All') {
                if ($p.attr('name') != category) {
                    flag = false;
                }
            }

            if (flag) {
                $p.show();
            } else {
                $p.hide();
            }
        });
    }

    $('#search').keyup(function(event) {
        keyword = $(this).val();
        filter();
    });

    timer();

    function timer() {
        if ($('#status').text() == '进行中-In Process') {
            var ts = parseInt($('#deadline').text()) * 1000 - (new Date()).valueOf();
            var dd = parseInt(ts / 1000 / 60 / 60 / 24, 10);
            var hh = parseInt(ts / 1000 / 60 / 60 % 24, 10);
            var mm = parseInt(ts / 1000 / 60 % 60, 10);
            var ss = parseInt(ts / 1000 % 60, 10);
            dd = checkTime(dd);
            hh = checkTime(hh);
            mm = checkTime(mm);
            ss = checkTime(ss);
            document.getElementById("timeleft").innerHTML = dd + " Days " + hh + ":" + mm + ":" + ss;
        } else {
            document.getElementById("timeleft").innerHTML = "-";
        }

        setTimeout(function() {
            timer();
        }, 1000);
    }

    function checkTime(i) {
        if (i < 10) {
            i = "0" + i;
        }
        return i;
    }
});
</script>